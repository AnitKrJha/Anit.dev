---
import { Image } from "astro:assets";
import type { CollectionEntry } from "astro:content";
import { formattedDate } from "../lib/utils";
type Props = CollectionEntry<"blog">;
const {
  data: { date, description, image, isDraft, tags, title },
  ...other
} = Astro.props;
---

<a href={`/blog/${other.slug}`} class="no-underline group">
  <article
    class="group-hover:bg-neutral-300 dark:group-hover:bg-neutral-800 duration-200 p-1 rounded flex flex-col sm:flex-row gap-6 items-center sm:items-start my-8"
  >
    <figure
      class="rounded aspect-video w-full sm:basis-60 flex-grow-0 flex-shrink-0 my-0 max-w-sm overflow-hidden"
    >
      {
        image ? (
          <Image
            loading={"eager"}
            transition:name={other.slug + "image"}
            class="object-cover aspect-video rounded"
            src={image}
            alt={`${title} cover image`}
          />
        ) : (
          <p
            transition:name={other.slug + "image"}
            class="w-full font-bold aspect-video rounded grid place-items-center bg-stone-600 text-white"
          >
            {title}
          </p>
        )
      }
    </figure>
    <div class="">
      <h3
        class="text-lg font-bold my-0"
        transition:name={other.slug + "heading"}
      >
        {title}
      </h3>
      <p class="opacity-80">{description}</p>
      <time class="opacity-80"><small>{formattedDate(date)}</small></time>
    </div>
  </article>
</a>
